"use strict";(self.webpackChunkdisco_frontend=self.webpackChunkdisco_frontend||[]).push([[605],{37711:(e,r,t)=>{t.d(r,{loadGroupContentsNext:()=>u});var a=t(15593),i=t(97001),n=t(97237),s=t(70363),l=t(2172);let c=e=>({type:l.Y8,groupId:e}),o=(e,r)=>({type:l.PN,groupId:e,response:r}),d=(e,r)=>({type:l.w2,groupId:e,error:r}),u=e=>(function(){var r=(0,a.coroutine)(function*(r,t){let a=t(),l=(0,i.Z)(a.view.byGroup,"".concat(e,".nextPage"),null);if(!l||a.view.loadingNextPage)return null;let u=new s.Z;try{r(c(e));let t=yield u.getGroupContentsNextPage(e,l);return r(o(e,t)),r((0,n.qU)(t.results))}catch(t){return r(d(e,t))}});return function(e,t){return r.apply(this,arguments)}})()},2172:(e,r,t)=>{t.d(r,{PN:()=>n,Y8:()=>i,hS:()=>a,w2:()=>s});let a="LOAD_GROUP_CONTENTS_SUCCESS",i="LOAD_GROUP_CONTENTS_NEXT",n="LOAD_GROUP_CONTENTS_NEXT_SUCCESS",s="LOAD_GROUP_CONTENTS_NEXT_FAIL"},94899:(e,r,t)=>{t.d(r,{publicSearchNext:()=>u});var a=t(15593),i=t(97237),n=t(70363),s=t(46201);let l=()=>({type:s.He}),c=e=>({type:s.G7,response:e}),o=e=>({type:s.BT,error:e});var d=t(81878);let u=()=>(function(){var e=(0,a.coroutine)(function*(e,r){let t=new n.Z,a=r(),s=(0,d.xb)(r());if(!s||a.view.loadingNextPage)return null;let{groupId:u,next:m}=s;if(!u||!m)return null;try{e(l());let r=yield t.getGroupContentsNextPage(u,m);e((0,i.qU)(r.results)),e(c(r))}catch(r){return e(o(r))}});return function(r,t){return e.apply(this,arguments)}})()},81878:(e,r,t)=>{t.d(r,{xb:()=>l});var a=t(3336),i=t(64419);let n=e=>e.search,s=e=>{let r=n(e);return r?r.query:null};(0,a.P1)(s,e=>(0,i.pD)(e));let l=e=>{let r=n(e);return r&&r.query&&!(r.query.length<3)?r:null}},46201:(e,r,t)=>{t.d(r,{BT:()=>l,G7:()=>s,He:()=>n,Lz:()=>i,zu:()=>a});let a="PUBLIC_SEARCH_RESET",i="PUBLIC_SEARCH_UPDATE_QUERY",n="PUBLIC_SEARCH_NEXT",s="PUBLIC_SEARCH_NEXT_SUCCESS",l="PUBLIC_SEARCH_NEXT_FAIL"},4665:(e,r,t)=>{t.d(r,{Ye:()=>m});var a=t(97001),i=t(3336),n=t(40706),s=t(7855),l=t(71964),c=t(68284),o=t(26655),d=t(28564);let u=e=>e.view,m=(e,r)=>(0,a.Z)(u(e),"byGroup[".concat(r.id,"]"),null),p=(e,r)=>{let t=[],a=r;for(;;){let r=(0,d.iP)(a,e);if(r)t.unshift(r),a=r;else break}return t},f=(e,r)=>({folderId:(0,a.Z)(r,"folderId",null),playlistId:(0,a.Z)(r,"playlistId",null)}),k=(0,i.P1)([f,l.jA,c.$F],(e,r,t)=>{let{folderId:a,playlistId:i}=e,s=a?r.find(e=>e.id===parseInt(a)):null,l=s?p(r,s):[],c=[];if(l.length>0&&c.push(...l.map(e=>({type:n.oG,id:e.id,caption:e.name}))),s&&c.push({type:n.oG,id:s.id,caption:s.name}),i&&t[parseInt(i)]){let e=t[parseInt(i)];c.push({type:n.zg,id:e.playlist_id,caption:e.name})}return c});(0,i.P1)(k,e=>{let r=Array.from(e).reverse().find(e=>e.type===n.oG);return r?r.id:null});let _=(0,i.P1)(k,e=>{let r=e.length;return r>0?e[r-1]:null}),g=()=>{let{sort:e}=window.discogroup_data.extra_parameters,r=[s.PE,s.FR],t=e.find(e=>r.includes(e.replace("-","")));if(!t)return null;let a="-"===t[0]?s.U9:s.oy;return{sortParam:t.replace("-",""),sortDirection:a}};(0,i.P1)([_,l.jA,(e,r)=>r.searchTerms,g],(e,r,t,a)=>{if(e&&e.type===n.oG){let i=r.filter(r=>r.parent===e.id).filter(e=>!t||t.some(r=>e.name.toLowerCase().indexOf(r)>=0));if(!a)return i;let{sortParam:n,sortDirection:s}=a;return(0,d.IT)(i,n,s)}return[]}),(0,i.P1)([(e,r)=>r.id,m,o.KJ,c.$F],(e,r,t,a)=>r&&r.items?r.items.map(e=>e.type===n.IK?t[e.id]:e.type===n.zg?a[e.id]:null).filter(e=>e):null)},41158:(e,r,t)=>{t.d(r,{Z:()=>y});var a=t(68137),i=t(44314),n=t(66478),s=t(68577),l=t(31250),c=t(40706),o=t(46748);function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach(function(r){m(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function m(e,r,t){return(r=p(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function p(e){var r=f(e,"string");return"symbol"==typeof r?r:String(r)}function f(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}let k={};function _(e,r,t){return u(u({},e),{[r]:u(u({},e[r]),{},{shares:t(e[r].shares)})})}function g(e,r){let t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i={};return r.forEach(r=>{let n;let s=r.playlist_id;if(t){let t=e[s];n=t&&t.id!==r.id?u(u({},r),{},{tracks:r.tracks?r.tracks.map(e=>e.id):[],tags:r.tags||[]}):t&&t.tracks_info&&r.tracks_info&&t.tracks_info.page<r.tracks_info.page?u(u({},r),{},{tracks:r.tracks?[...t.tracks,...r.tracks.map(e=>e.id)]:t.tracks}):t&&t.timestamp===r.timestamp&&r.tracks&&t.tracks&&t.tracks.length>=r.tracks.length&&0===(0,a.Z)(r.tracks.map(e=>(null==e?void 0:e.id)||e),t.tracks.slice(0,r.tracks.length)).length?u(u({},t),{},{name:r.name,theme:r.theme,general_message:r.general_message,general_message_html:r.general_message_html,sort_key:r.sort_key,sort_direction:r.sort_direction,sections:r.sections,share:r.share,user_aliases:r.user_aliases,track_aliases:r.track_aliases,playlist_aliases:r.playlist_aliases,default_zip_mode:r.default_zip_mode,share_mode:r.share_mode,watermark:r.watermark,watermarking_status:r.watermarking_status,showcase:r.showcase,album_image_url:r.album_image_url,color:r.color}):t&&t.tracks&&!r.tracks_info?u(u({},t),r):u(u({},r),{},{tracks:r.tracks?r.tracks.map(e=>e.id):[],sections:r.sections,tags:r.tags||[],user_aliases:r.user_aliases,track_aliases:r.track_aliases,playlist_aliases:r.playlist_aliases})}else n=r;n=u(u({theme:null},n),{},{actionStatus:null}),i[s]=u(u({},e[s]||{}),n)}),u(u({},e),i)}function v(e,r){if(!e.sections||0===e.sections.length||!e.tracks.some(e=>r.indexOf(e)>-1))return e.sections;let t=e.sections.slice();for(let a=e.tracks.length-1;a>=0;a--){let i=e.tracks[a];-1!==r.indexOf(i)&&(t=t.map(e=>e.position>a?u(u({},e),{},{position:e.position-1}):e))}return t}let y=(0,s.L)(k,{[l.jQi](e,r){let{data:t}=r;return t.playlists&&t.playlists.length?g(e,t.playlists):e},[l.ev7](e,r){if(!r.list||0===r.list.length)return e;let t=r.list.filter(e=>e.type===c.zg);return g(e,t)},[l.r0m](e,r){let{playlists:t}=r,a={};return t.forEach(e=>a[e.playlist_id]=e),u(u({},e),a)},[l.VRR](e,r){let{playlist:t}=r,{id:a,name:i,stats_all:n,stats_by_user:s,playlist_id:l}=t,c={[l]:u(u({},e[l]),{},{has_stats_loaded:!0,id:a,name:i,stats_all:n,stats_by_user:s})};return u(u({},e),c)},[l._1n](e,r){let{replacedPlaylists:t}=r,a={};return t.forEach(r=>{let{playlist_id:t,replacement_playlistversion_id:i}=r;e[t]&&(a[t]=u(u({},e[t]),{},{id:i,url:e[t].url.replace(/\/\d+\/$/,"/".concat(i,"/"))}))}),u(u({},e),a)},[l.C4V](e,r){let{group:t}=r;return(0,o.Nd)(e,t)},[l.JEb](e,r){if(!r.list||0===r.list.length)return e;let t=[];return r.list.forEach(e=>{e.playlist_versions&&t.push(...e.playlist_versions)}),g(e,t,!1)},[l.pw9](e,r){let{playlistIds:t}=r;return(0,n.Z)(e,t)},[l.tZf](e,r){let{trackIds:t}=r,a={};return Object.keys(e).forEach(r=>{if(e[r].tracks&&e[r].tracks.some(e=>t.indexOf(e)>-1)){let i=e[r].tracks.filter(e=>-1===t.indexOf(e)),n=v(e[r],t);a[r]=u(u({},e[r]),{},{tracks:i,sections:n})}}),u(u({},e),a)},[l.PFE](e,r){let{masterTrack:t,tracksToMerge:a}=r,n=a.map(e=>e.id),s={};return Object.keys(e).forEach(r=>{if(e[r].tracks&&e[r].tracks.some(e=>n.indexOf(e)>-1)){let a=e[r].tracks.indexOf(t.id)>-1,l=(0,i.Z)(e[r].tracks,e=>n.indexOf(e)>-1);if(-1===l)return e[r];let c=e[r].tracks.filter((e,r)=>-1===n.indexOf(e)||r===l&&!a).map(e=>-1===n.indexOf(e)?e:t.id),o=l>-1&&!a?n.filter(t=>t!==e[r].tracks[l]):n,d=v(e[r],o);s[r]=u(u({},e[r]),{},{tracks:c,sections:d})}}),u(u({},e),s)},[l.YdT](e,r){let{playlist:t,result:a,duplicate:i}=r,n=t.playlist_id,s=a.id;return i?e:_(e,n,e=>u(u({},e),{},{items:[s].concat(e&&e.items||[])}))},[l.cnd](e,r){let{id:t}=r;return _(e,t,e=>u(u({},e),{},{error:null,errorMessage:null,loading:!0,loaded:!1}))},[l.__F](e,r){let{id:t,responseShares:a}=r;return _(e,t,e=>u(u({},e),{},{items:a.map(e=>e.id),error:null,errorMessage:null,loading:!1,loaded:!0}))},[l.Wn8](e,r){let{id:t,error:a,errorMessage:i}=r;return _(e,t,e=>u(u({},e),{},{error:a,errorMessage:i,loading:!1,loaded:!1}))},[l.MHH](e,r){let{id:t,status:a}=r;return u(u({},e),{},{[t]:u(u({},e[t]),{},{actionStatus:u(u({},e[t].actionStatus),a)})})},[l.s7V](e,r){let{playlist:t,urls:a}=r,i=t.playlist_id;return u(u({},e),{},{[i]:u(u({},e[i]),{},{zip_urls:a})})},[l.FLy](e,r){let{playlist:t}=r,a=t.playlist_id;return u(u({},e),{},{[a]:u(u({},e[a]),{},{has_any_territoryless_track:t.has_any_territoryless_track})})},[l.vZy](e,r){let{playlistId:t,response:a}=r;return u(u({},e),{},{[t]:u(u({},e[t]),{},{album_image_url:a.album_image_url,color:a.color,image_url:a.image_url,release_date:a.release_date})})},[l.sCA](e,r){let{playlistId:t,response:a}=r;return u(u({},e),{},{[t]:u(u({},e[t]),{},{album_image_url:a.album_image_url,color:a.color,image_url:a.image_url,release_date:a.release_date})})},[l.SvU](e,r){let{playlistIds:t,data:a}=r,i={};return t.forEach(r=>{i[r]=u(u({},e[r]),a)}),u(u({},e),i)}})},94862:(e,r,t)=>{t.d(r,{Z:()=>k});var a=t(31250),i=t(18716),n=t(28564),s=t(46748);function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach(function(r){o(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function o(e,r,t){return(r=d(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function d(e){var r=u(e,"string");return"symbol"==typeof r?r:String(r)}function u(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}let m={id:null,url:void 0,metadata:{Artwork:{mixed:!1,value:void 0},Title:{mixed:!1,value:""},Album:{mixed:!1,value:""},Artist:{mixed:!1,value:""},Composer:{mixed:!1,value:""},Grouping:{mixed:!1,value:""},Genre:{mixed:!1,value:""},Year:{mixed:!1,value:""},Lyrics:{mixed:!1,value:""},Comment:{mixed:!1,value:""},TrackNumber:{mixed:!1,value:""},Tracks:{mixed:!1,value:""},BPM:{mixed:!1,value:""},ProNumber:{mixed:!1,value:""},ISRC:{mixed:!1,value:""}},comments:[],track_writers:[],groups:[]},p={saving:!1,saved:!0,showError:!1,error:null,showTerritoryWarning:!1,host:"undefined"!=typeof window?window.backend:"",editedTrack:m,originalEditedTrackMetadata:{}};function f(e,r){return e.filter(e=>!e.isNew).map(e=>e.isEditing?(r.comments||[]).find(r=>r.id===e.id):e)}function k(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(r.type){case a.lKn:return p;case a.du7:{let t;let{fetchingTracks:a,tracksMetadata:s,tracksComments:l,trackWriters:o}=r;t=r.fetchingTracks?c(c({},(0,i.I_)(a)),(0,i.qU)(s)):{};let d=l?l[0]:e.editedTrack.comments;return c(c({},e),{},{originalEditedTrackMetadata:c(c({},e.originalEditedTrackMetadata),t),editedTrack:c(c({},e.editedTrack),{},{comments:d,metadata:c(c({},e.editedTrack.metadata),t),track_writers:o?o[0]:e.editedTrack.track_writers,groups:a?(0,n.g7)(a):e.editedTrack.groups})})}case a.mki:return c(c({},e),{},{saved:!1,showError:!1,originalEditedTrackMetadata:r.editedTrack.metadata,editedTrack:r.editedTrack});case a.shZ:return c(c({},e),{},{saved:!1,editedTrack:r.editedTrack});case a.Xjs:case a.T7H:case a.hJl:case a.l4d:return c(c({},e),{},{saving:!0});case a._Vg:case a.BCe:return c(c({},e),{},{originalEditedTrackMetadata:e.editedTrack.metadata,showError:!1,saving:!1,saved:!0});case a.FxX:return c(c({},e),{},{editedTrack:c(c({},e.editedTrack),{},{groups:r.commonGroups}),showError:!1,saving:!1,saved:!0});case a.$wo:case a.fPB:return c(c({},e),{},{saving:!1,saved:!1,showError:"save_metadata"});case a.TDi:return c(c({},e),{},{saving:!1,saved:!0});case a.jjp:case a.TRL:return c(c({},e),{},{saving:!1,saved:!1});case a.Ok6:case a.TwC:case a.xHw:return c(c({},e),{},{saving:!0,saved:!1,showError:!1,error:null});case a.nQT:{let{index:t,comment:a}=r,i=e.editedTrack.comments.slice();return i.splice(t,1),i.unshift(a),c(c({},e),{},{saving:!1,saved:!0,showError:!1,error:null,editedTrack:c(c({},e.editedTrack),{},{comments:i})})}case a.ut0:{var t;let{trackId:a,splitId:i}=r;if(e.editedTrack.id!==a)return e;return c(c({},e),{},{editedTrack:c(c({},e.editedTrack),{},{track_writers:(null===(t=e.editedTrack.track_writers)||void 0===t?void 0:t.filter(e=>e.id!==i))||[]})})}case a.Mnt:{let{track:t,writer:a}=r;if(e.editedTrack.id!==t&&e.editedTrack.id)return e;return c(c({},e),{},{editedTrack:c(c({},e.editedTrack),{},{track_writers:[...e.editedTrack.track_writers||[],a]})})}case a.H04:{let{track:t,split:a}=r;if(e.editedTrack.id!==t)return e;let{track_writers:i}=e.editedTrack,n=i.findIndex(e=>e.id===a.id);return c(c({},e),{},{editedTrack:c(c({},e.editedTrack),{},{track_writers:(0,s.$G)(i,n,a)})})}case a.ZqE:case a.Y7s:return c(c({},e),{},{saving:!1,saved:!0,showError:"save_comment",error:r.error});case a.Edt:{let{index:t,originalTrack:a}=r,i=c(c({},e.editedTrack.comments[t]),{},{isEditing:!0}),n=e.editedTrack.comments;return c(c({},e),{},{editedTrack:c(c({},e.editedTrack),{},{comments:[...f(n.slice(0,t),a),i,...f(n.slice(t+1),a)]})})}case a.QCW:{let{index:t,comment:a}=r;return c(c({},e),{},{saving:!1,saved:!0,showError:!1,error:null,editedTrack:c(c({},e.editedTrack),{},{comments:(0,s.$G)(e.editedTrack.comments,t,a)})})}case a.oRh:{let{index:t}=r;return c(c({},e),{},{saving:!1,saved:!0,showError:!1,error:null,editedTrack:c(c({},e.editedTrack),{},{comments:[...e.editedTrack.comments.slice(0,t),...e.editedTrack.comments.slice(t+1)]})})}case a.lBL:return c(c({},e),{},{saving:!1,saved:!0,showError:"delete_comment",error:r.error});case a.tWb:{let{originalTrack:t}=r;return c(c({},e),{},{editedTrack:c(c({},e.editedTrack),{},{comments:f(e.editedTrack.comments,t)})})}case a.HIM:return c(c({},e),{},{editedTrack:m});case a.l$L:return c(c({},e),{},{showTerritoryWarning:r.status});default:return e}}}}]);
//# sourceMappingURL=605-b2ce434363fc0ae3.min.js.map